<h1>Pong Game</h1>
<div id='field'>
  <div id='player_1'></div>
  <div id='ball'></div>
  <div id='player_2'></div>
  <div id='line'></div>
</div>
<div id='score'>0:0</div>

<!-- <audio src="pong.wav" id='pong_sound'></audio>
<audio src="score.wav" id='score_sound'></audio> -->

<style>
#score,
h1 {
  text-align: center;
  font-size: 50px;
}
#field {
  width: 1000px;
  height: 600px;
  background: black;
  margin: 20px auto;
  position: relative;
}
#player_1 {
  left: 10px;
}
#player_2 {
  left: 970px;
}
#player_1,
#player_2 {
  position: absolute;
  top: 100px;
  width: 20px;
  height: 100px;
  background: white;
}
#ball {
  position: absolute;
  background: white;
  left: 250px;
  top: 250px;
  width: 20px;
  height: 20px;
}
#line {
  width: 4px;
  height: 600px;
  background: gray;
  position: absolute;
  left: 50%;
  margin-left: -2px;
}
</style>

<script src='blob.js'> </script>
<script>
  var game = new PongGame();

  // game knows nothing about the score
  var left_score = 0;
  var right_score = 0;
  var scoreTag = document.querySelector('#score');

  // game config
  game.ballTag = document.querySelector('#ball');
  game.fieldTag = document.querySelector('#field');
  game.padLeftTag = document.querySelector('#player_1');
  game.padRightTag = document.querySelector('#player_2');

  game.useCustomBouncing = true;
  game.useCustomBallPostionUpdate = true;

  // game events
  game.addEventListener('tick', function(frame){
    // this function is only needed when useCustomBallPostionUpdate
    game.ball.x += game.ball.dir_x * 5;
    game.ball.y += game.ball.dir_y * 5;
  });

  game.addEventListener('keydown', function(key){
    if(key === 'w'){ game.padLeft.move(-5); }
    if(key === 's'){ game.padLeft.move(5); }
    if(key === 'up'){ game.padRight.move(-5); }
    if(key === 'down'){ game.padRight.move(5); }
  });

  game.addEventListener('collision', function(ball, pad){
    if(pad.side === 'left'){
      ball.setDirection(1)
    } else {
      ball.setDirection(-1)
    }
  });

  game.addEventListener('bounce', function(edge){
    if(edge === 'top'){ game.ball.setDirection(null, 1) } // those 2 lines needed only if useCustomBouncing
    if(edge === 'bottom'){ game.ball.setDirection(null, -1) }

    if(edge === 'right'){
      left_score++;
      scoreTag.innerHTML = left_score + ':' + right_score;
      game.ball.resetPosition()
      game.ball.setDirection(-1)
    }
    if(edge === 'left'){
      right_score++;
      scoreTag.innerHTML = left_score + ':' + right_score;
      game.ball.resetPosition()
      game.ball.setDirection(1)
    }
  });

  game.start()
</script>
