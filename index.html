<h1>Pong Game</h1>
<div id='field'>
  <div id='player_1'></div>
  <div id='ball'></div>
  <div id='player_2'></div>
  <div id='line'></div>
</div>
<div id='score'>0:0</div>

<!-- <audio src="pong.wav" id='pong_sound'></audio>
<audio src="score.wav" id='score_sound'></audio> -->

<style>
#score,
h1 {
  text-align: center;
  font-size: 50px;
}
#field {
  width: 1000px;
  height: 600px;
  background: black;
  margin: 20px auto;
  position: relative;
}
#player_1 {
  left: 10px;
}
#player_2 {
  left: 970px;
}
#player_1,
#player_2 {
  position: absolute;
  top: 100px;
  width: 20px;
  height: 100px;
  background: white;
}
#ball {
  position: absolute;
  background: white;
  left: 250px;
  top: 250px;
  width: 20px;
  height: 20px;
}
#line {
  width: 4px;
  height: 600px;
  background: gray;
  position: absolute;
  left: 50%;
  margin-left: -2px;
}
</style>

<script src='blob.js'> </script>
<script>
  var game = new PongGame();

  // game knows nothing about the score
  var left_score = 0;
  var right_score = 0;
  var scoreTag = document.querySelector('#score');

  // game config
  game.ballTag = document.querySelector('#ball');
  game.fieldTag = document.querySelector('#field');
  game.padLeftTag = document.querySelector('#player_1');
  game.padRightTag = document.querySelector('#player_2');

  var ballTag = document.querySelector('#ball');
  var player_1 = document.querySelector('#player_1');
  var player_2 = document.querySelector('#player_2');

  // game events
  game.addEventListener('tick', function(data){
    ballTag.style.left = data.ball.x;
    ballTag.style.top = data.ball.y;

    player_1.style.left = data.padLeft.x;
    player_1.style.top = data.padLeft.y;

    player_2.style.left = data.padRight.x;
    player_2.style.top = data.padRight.y;
  });

  game.addEventListener('bounce', function(side){
    if(side === 'left'){
      right_score++;
      scoreTag.innerHTML = left_score + ':' + right_score;
    }
    if(side === 'right'){
      left_score++;
      scoreTag.innerHTML = left_score + ':' + right_score;
    }
  })

  game.start()
</script>
